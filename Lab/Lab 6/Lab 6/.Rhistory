top1_meds
# Count and get top 1 per specialty, excluding n == 1
top1_meds <- med_candidates %>%
group_by(medical_specialty, word) %>%
count(sort = TRUE) %>%
filter(n > 1) %>%
slice_max(order_by = n, n = 1) %>%
ungroup()
# View results
top1_meds
# Simple bar plot
ggplot(top1_meds, aes(x = reorder(medical_specialty, n), y = n, fill = word)) +
geom_col(show.legend = TRUE) +
coord_flip() +
labs(title = "Top Medication-like Word per Specialty",
x = "Medical Specialty",
y = "Frequency",
fill = "Medication")
mt_samples <- read_csv("https://raw.githubusercontent.com/USCbiostats/data-science-data/master/00_mtsamples/mtsamples.csv")
mt_samples <- mt_samples |>
select(description, medical_specialty, transcription)
library(dplyr)
library(tidytext)
library(ggplot2)
# Define your target specialties
target_specialties <- c(
"Surgery", "Cardiovascular / Pulmonary", "Orthopedic", "Radiology", "General Medicine",
"Gastroenterology", "Neurology", "Obstetrics / Gynecology", "Urology", "ENT - Otolaryngology",
"Neurosurgery", "Hematology - Oncology", "Ophthalmology", "Nephrology", "Emergency Room Reports",
"Pediatrics - Neonatal", "Pain Management", "Psychiatry / Psychology", "Dermatology",
"Cosmetic / Plastic Surgery", "Dentistry", "Physical Medicine - Rehab", "Sleep Medicine",
"Endocrinology", "Bariatrics", "Rheumatology", "Speech - Language", "Allergy / Immunology",
"Hospice - Palliative Care"
)
# Tokenize and remove stop words
med_tokens <- mt_samples %>%
filter(medical_specialty %in% target_specialties) %>%
unnest_tokens(word, transcription) %>%
anti_join(stop_words, by = "word")
# Filter for medication-like words using suffixes
med_candidates <- med_tokens %>%
filter(grepl("ine$|cin$|ol$|pril$|mab$|azole$|caine$|xone$|vir$|mycin$|sartan$", word))
# Count and get top 1 per specialty (highest frequency only)
top1_meds <- med_candidates %>%
group_by(medical_specialty, word) %>%
count() %>%
slice_max(order_by = n, n = 1, with_ties = FALSE) %>%
ungroup()
# View results
top1_meds
library(dplyr)
library(tidytext)
library(ggplot2)
# Define your target specialties
target_specialties <- c(
"Surgery", "Cardiovascular / Pulmonary", "Orthopedic", "Radiology", "General Medicine",
"Gastroenterology", "Neurology", "Obstetrics / Gynecology", "Urology", "ENT - Otolaryngology",
"Neurosurgery", "Hematology - Oncology", "Ophthalmology", "Nephrology", "Emergency Room Reports",
"Pediatrics - Neonatal", "Pain Management", "Psychiatry / Psychology", "Dermatology",
"Cosmetic / Plastic Surgery", "Dentistry", "Physical Medicine - Rehab", "Sleep Medicine",
"Endocrinology", "Bariatrics", "Rheumatology", "Speech - Language", "Allergy / Immunology",
"Hospice - Palliative Care"
)
# Tokenize and remove stop words
med_tokens <- mt_samples %>%
filter(medical_specialty %in% target_specialties) %>%
unnest_tokens(word, transcription) %>%
anti_join(stop_words, by = "word")
# Filter for medication-like words using suffixes
med_candidates <- med_tokens %>%
filter(grepl("ine$|cin$|ol$|pril$|mab$|azole$|caine$|xone$|vir$|mycin$|sartan$", word))
# Count and get top 1 per specialty, excluding n == 1
top1_meds <- med_candidates %>%
group_by(medical_specialty, word) %>%
count() %>%
filter(n > 1) %>%
group_by(medical_specialty) %>%
slice_max(order_by = n, n = 1, with_ties = FALSE) %>%
ungroup()
# View results
top1_meds
# View results
top1_meds |>
print(n=40)
library(dplyr)
library(tidytext)
# Filter for SOAP specialty
soap_notes <- mt_samples %>%
filter(medical_specialty == "SOAP / Chart / Progress Notes")
# Tokenize into bigrams (2-word phrases)
soap_bigrams <- soap_notes %>%
unnest_tokens(bigram, transcription, token = "ngrams", n = 2) %>%
count(bigram, sort = TRUE)
# View top phrases
head(soap_bigrams, 20)
View(mt_samples)
library(dplyr)
library(tidytext)
# Filter for OB/GYN specialty
obgyn_notes <- mt_samples %>%
filter(medical_specialty == "Obstetrics / Gynecology")
# Tokenize into individual words with line number
obgyn_words <- obgyn_notes %>%
unnest_tokens(word, transcription) %>%
mutate(line_id = row_number())
# Find positions of "preoperative" and "diagnoses"
preop_positions <- obgyn_words %>%
mutate(word = toupper(word)) %>%
mutate(next_word = lead(word)) %>%
filter(word == "PREOPERATIVE" & next_word == "DIAGNOSES") %>%
pull(line_id)
# Extract up to 50 words after each match
preop_context <- obgyn_words %>%
filter(line_id %in% (preop_positions + 1):(max(preop_positions + 50))) %>%
group_by(match = cut(line_id, breaks = c(preop_positions, max(preop_positions + 50)), include.lowest = TRUE)) %>%
summarise(text = paste(word, collapse = " "))
# View results
preop_context
# Extract up to 50 words after each match
preop_context <- obgyn_words %>%
filter(line_id %in% (preop_positions + 1):(max(preop_positions + 100))) %>%
group_by(match = cut(line_id, breaks = c(preop_positions, max(preop_positions + 100)), include.lowest = TRUE)) %>%
summarise(text = paste(word, collapse = " "))
# View results
preop_context
library(dplyr)
library(tidytext)
# Filter for OB/GYN specialty
obgyn_notes <- mt_samples %>%
filter(medical_specialty == "Obstetrics / Gynecology")
# Tokenize into words
obgyn_words <- obgyn_notes %>%
unnest_tokens(word, transcription)
# Add line number
obgyn_words <- obgyn_words %>%
mutate(position = row_number())
# Find positions of "preoperative diagnoses"
preop_start <- obgyn_words %>%
mutate(word = toupper(word)) %>%
mutate(next_word = lead(word)) %>%
filter(word == "PREOPERATIVE" & next_word == "DIAGNOSES") %>%
pull(position)
# Get up to 50 words after each match
preop_after <- obgyn_words %>%
filter(position %in% (preop_start + 2):(preop_start + 51))
# View result
preop_after %>%
pull(word)
library(dplyr)
library(tidytext)
# Filter for OB/GYN specialty
obgyn <- mt_samples %>%
filter(medical_specialty == "Obstetrics / Gynecology")
# Tokenize into words
words <- obgyn %>%
unnest_tokens(word, transcription)
# Add line number
words <- words %>%
mutate(line = row_number())
# Find where "PREOPERATIVE" is followed by "DIAGNOSES"
start <- which(words$word == "preoperative" & lead(words$word) == "diagnoses")
# Get up to 50 words after that
after <- words %>%
filter(line %in% (start + 2):(start + 51))
# Show result
after$word
mt_samples %>%
filter(medical_specialty == "Pediatrics - Neonatal") %>%
select(description, transcription) %>%
head(10)
View(mt_samples)
mt_samples %>%
filter(medical_specialty == "Pediatrics - Neonatal") %>%
filter(grepl("ADMITTING DIAGNOSES", transcription, ignore.case = TRUE)) %>%
filter(grepl("ADMITTING DIAGNOSES", description, ignore.case = TRUE))
mt_samples %>%
filter(medical_specialty == "Pediatrics - Neonatal") %>%
filter(grepl("ADMITTING DIAGNOSES", transcription, ignore.case = TRUE)) %>%
filter(grepl("ADMITTING DIAGNOSES", description, ignore.case = TRUE)) |>
print()
mt_samples %>%
filter(medical_specialty == "Pediatrics - Neonatal") %>%
filter(grepl("ADMITTING DIAGNOSES", transcription, ignore.case = TRUE)) %>%
print()
mt_samples %>%
filter(medical_specialty == "Pediatrics - Neonatal") %>%
filter(grepl("ADMITTING DIAG", transcription, ignore.case = TRUE)) %>%
print()
## Preop dx: OB/Gyn
mt_samples %>%
filter(medical_specialty == "Pediatrics - Neonatal") %>%
filter(grepl("PREOPERATIVE DIAG", transcription, ignore.case = TRUE)) %>%
print()
## Preop dx: OB
mt_samples %>%
filter(medical_specialty == "Obstetrics / Gynecology") %>%
filter(grepl("PREOPERATIVE DIAG", transcription, ignore.case = TRUE)) %>%
print()
## Preop dx: OB
mt_samples %>%
filter(medical_specialty == "Obstetrics / Gynecology") %>%
filter(grepl("PREOPERATIVE DIAG", transcription, ignore.case = TRUE)) %>%
filter(grepl("postpartum", description, ignore.case = TRUE)) %>%
print()
## Preop dx: Neonatal
mt_samples %>%
filter(medical_specialty == "Pediatrics - Neonatal") %>%
filter(grepl("PREOPERATIVE DIAG", transcription, ignore.case = TRUE)) %>%
print()
## Prepop dx: Neurosurg
mt_samples %>%
filter(medical_specialty == "Neurosurgery") %>%
filter(grepl("PREOPERATIVE DIAG", transcription, ignore.case = TRUE)) %>%
print()
## Prepop dx for endoscopic procedures: Neurosurg
mt_samples %>%
filter(medical_specialty == "Neurosurgery") %>%
filter(grepl("PREOPERATIVE DIAG", transcription, ignore.case = TRUE)) %>%
filter(grepl("endoscopic", description, ignore.case = TRUE)) %>%
print()
## HPI for Hospice pts
mt_samples %>%
filter(medical_specialty == "Hospice - Palliative Care") %>%
filter(grepl("HISTORY", transcription, ignore.case = TRUE)) %>%
print()
## HPI for Hospice pts
mt_samples %>%
filter(medical_specialty == "Hospice - Palliative Care") %>%
filter(grepl("HISTORY", transcription, ignore.case = TRUE)) %>%
filter(grepl("REASON", transcription, ignore.case = FALSE)) %>%
print()
## HPI for Hospice pts
mt_samples %>%
filter(medical_specialty == "Hospice - Palliative Care") %>%
filter(grepl("HISTORY", transcription, ignore.case = FALSE)) %>%
print()
## HPI for Hospice pts
mt_samples %>%
filter(medical_specialty == "Hospice - Palliative Care") %>%
filter(grepl("HISTORY", transcription, ignore.case = TRUE)) %>%
print()
## HPI for Hospice pts
mt_samples %>%
filter(medical_specialty == "Hospice - Palliative Care") %>%
filter(grepl("HISTORY", transcription, ignore.case = TRUE)) %>%
filter(!grepl("REASON FOR", transcription, ignore.case = TRUE)) %>%
print()
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
print()
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
print()
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE))
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
filter(!grepl("Pediatrics - Neonatal", transcription, ignore.case = TRUE))
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
filter(!grepl("Pediatrics - Neonatal", medical_specialty, ignore.case = TRUE))
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
filter(!grepl("Pediatrics - Neonatal", "Emergency Room Reports", medical_specialty, ignore.case = TRUE))
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
filter(!grepl("Pediatrics - Neonatal", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Emergency Room Reports", medical_specialty, ignore.case = TRUE))
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
filter(!grepl("Pediatrics - Neonatal", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Emergency Room Reports", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Consult - History and Phy.", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Cardiovascular / Pulmonary", medical_specialty, ignore.case = TRUE)) %>%
```
mt_samples %>%
filter(grepl("cardiac arrest", transcription, ignore.case = TRUE)) %>%
filter(!grepl("Pediatrics - Neonatal", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Emergency Room Reports", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Consult - History and Phy.", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Cardiovascular / Pulmonary", medical_specialty, ignore.case = TRUE))
library(dplyr)
# Define phrases to match
cardiac_arrest <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
# Define specialties to exclude
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy",
"Cardiovascular / Pulmonary"
)
# Create new dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(transcription %in% target_phrases)
# Filter dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(transcription %in% target_phrases)
rlang::last_trace()
library(dplyr)
# Filter dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(transcription %in% target_phrases)
# Create new dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(transcription %in% target_phrases)
library(dplyr)
# Define phrases to match
target_phrases <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
# Define specialties to exclude
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy",
"Cardiovascular / Pulmonary"
)
# Create new dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(transcription %in% target_phrases)
# View result
filtered_data
# Define phrases to match
target_phrases <- c(
"Urgent cardiac catheterization with coronary angiogra",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage",
"Left hip fracture. The patient is a 53-year-old female with probable pathological",
"Patient with a previous history of working in the coalmine and",
"History of diabetes, osteoarthritis, atrial fibrillation",
"Cardiac arrest, severe congestive heart failure, acute on"
)
# Define specialties to exclude
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy",
"Cardiovascular / Pulmonary"
)
# Create new dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(transcription %in% target_phrases)
# View result
filtered_data
# Create new dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(description %in% target_phrases)
# View result
filtered_data
library(dplyr)
# Define phrases to match
target_phrases <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
# Define specialties to exclude
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy",
"Cardiovascular / Pulmonary"
)
# Combine phrases into one regex pattern
pattern <- paste(target_phrases, collapse = "|")
# Filter dataset
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(grepl(pattern, description, ignore.case = TRUE)) %>%
select(description, medical_specialty, transcription)
# View result
filtered_data
View(mt_samples)
arrest_cases %>%
filter(!grepl("Pediatrics - Neonatal", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Emergency Room Reports", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Consult - History and Phy", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Cardiovascular / Pulmonary", medical_specialty, ignore.case = TRUE)) %>%
print()
library(dplyr)
arrest_cases <- c(
arrest_cases %>%
filter(!grepl("Pediatrics - Neonatal", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Emergency Room Reports", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Consult - History and Phy", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Cardiovascular / Pulmonary", medical_specialty, ignore.case = TRUE)) %>%
print()
arrest_cases %>%
library(dplyr)
arrest_cases <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
arrest_cases %>%
filter(!grepl("Pediatrics - Neonatal", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Emergency Room Reports", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Consult - History and Phy", medical_specialty, ignore.case = TRUE)) %>%
filter(!grepl("Cardiovascular / Pulmonary", medical_specialty, ignore.case = TRUE)) %>%
print()
## Cases mentioning cardiac arrest
library(dplyr)
arrest_cases <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy",
"Cardiovascular / Pulmonary"
)
pattern <- paste(target_phrases, collapse = "|")
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(grepl(pattern, description, ignore.case = TRUE)) %>%
select(description, medical_specialty, transcription)
filtered_data
cat(arrest_cases$transcription[1])
cat(arrest_cases[1])
cat(arrest_cases)
arrest_cases <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy",
"Cardiovascular / Pulmonary"
)
pattern <- paste(target_phrases, collapse = "|")
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(grepl(pattern, description, ignore.case = TRUE)) %>%
select(description, medical_specialty, transcription)
filtered_data
arrest_cases <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy",
"Cardiovascular / Pulmonary"
)
pattern <- paste(target_phrases, collapse = "|")
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(grepl(pattern, description, ignore.case = TRUE)) %>%
select(description, medical_specialty, transcription)
filtered_data
arrest_cases <- c(
"Urgent cardiac catheterization with coronary angiogra.",
"Mediastinal exploration and delayed primary chest closure. The patient is a 12-day-old infant who has undergone a modified stage I Norwood procedure with a Sano modification",
"Left hip fracture. The patient is a 53-year-old female with probable pathological fracture of the left proximal femur",
"Patient with a previous history of working in the coalmine and significant exposure to silica with resultant pneumoconiosis and fibrosis of the lung",
"History of diabetes, osteoarthritis, atrial fibrillation, hypertension, asthma, obstructive sleep apnea on CPAP, diabetic foot ulcer, anemia, and left lower extremity cellulitis",
"Cardiac arrest, severe congestive heart failure, acute on chronic respiratory failure, osteoporosis, and depression"
)
excluded_specialties <- c(
"Pediatrics - Neonatal",
"Emergency Room Reports",
"Consult - History and Phy.",
"Cardiovascular / Pulmonary"
)
pattern <- paste(target_phrases, collapse = "|")
filtered_data <- mt_samples %>%
filter(!medical_specialty %in% excluded_specialties) %>%
filter(grepl(pattern, description, ignore.case = TRUE)) %>%
select(description, medical_specialty, transcription)
filtered_data
View(after)
View(filtered_data)
View(filtered_data)
